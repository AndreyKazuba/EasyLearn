<Page x:Class="EasyLearn.UI.Pages.DictationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
      xmlns:converters="clr-namespace:EasyLearn.Infrastructure.ValueConverters"
      mc:Ignorable="d" 
      d:DesignHeight="700" d:DesignWidth="1100"
      Title="DictationPage"
      Background="{Binding PageBackground}">

    <materialDesign:DialogHost OverlayBackground="{DynamicResource MainColorSuperDark}">
        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="130"/>
            </Grid.RowDefinitions>

            <!--Секция обычного диктанта-->
            <Grid Visibility="{Binding CdSectionIsVisible, Converter={converters:ReverseCollapseConverter}}" 
                  VerticalAlignment="Stretch" 
                  HorizontalAlignment="Center"
                  d:Visibility="Collapsed">

                <Grid.RowDefinitions>
                    <!--Пустое пространство сверху-->
                    <RowDefinition Height="1.75*"/>
                    <!--Пространство для основного содержимого секции-->
                    <RowDefinition Height="Auto"/>
                    <!--Пространство "прилипающее" к нижней части секции (к текстбоксу ввода ответа)-->
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>

                <!--Основное содержимое секции-->
                <Grid Grid.Row="1" Height="238">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="132"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!--Отображение основного слова-->
                    <Border Grid.Row="0" Padding="50 0">
                        <Grid>

                            <!--Основное слово-->
                            <TextBlock FontSize="95"
                                       Text="{Binding CdMainDisplayValue}"
                                       Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                                       HorizontalAlignment="Center"
                                       Foreground="{DynamicResource EasyBlack}"
                                       VerticalAlignment="Center"
                                       d:Text="EasyLearn">
                            </TextBlock>

                            <!--Тип сновного слова-->
                            <Border HorizontalAlignment="Right" 
                                    VerticalAlignment="Center" 
                                    CornerRadius="4"
                                    Margin="0 0 -25 110"
                                    Visibility="{Binding CdUnitTypeIsVisible, Converter={converters:ReverseCollapseConverter}}" 
                                    Padding="5 3"
                                    Background="{Binding CdUnitTypeColor}">
                                <TextBlock FontSize="13" 
                                           FontFamily="Arial"
                                           Foreground="{DynamicResource EasyWhite}"
                                           FontWeight="Bold"
                                           Text="{Binding CdUnitTypeValue}">
                                </TextBlock>
                            </Border>

                        </Grid>
                    </Border>

                    <!--Отображение комментария-->
                    <TextBlock FontSize="36"
                               Grid.Row="1"
                               FontFamily="Arial"
                               Margin="0 0 0 3"
                               Text="{Binding CdCommentValue}"
                               Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                               HorizontalAlignment="Center"
                               Visibility="{Binding CdCommentIsVisile, Converter={converters:ReverseCollapseConverter}}"
                               VerticalAlignment="Top"
                               d:Text="Comment"
                               Foreground="#8c8c8c">
                    </TextBlock>

                    <!--Отображение первого примера-->
                    <TextBlock FontSize="21"
                               Grid.Row="2"
                               Margin="0 3 0 0"
                               Text="{Binding CdFirstExampleValue}"
                               Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Top"
                               FontFamily="Arial"
                               FontStyle="Italic"
                               d:Text="Comment"
                               Foreground="#8c8c8c">
                    </TextBlock>

                    <!--Отображение второго примера-->
                    <TextBlock FontSize="21"
                               Grid.Row="3"
                               Margin="0 5 0 0"
                               Text="{Binding CdSecondExampleValue}"
                               Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Top"
                               FontFamily="Arial"
                               FontStyle="Italic"
                               d:Text="Comment"
                               Foreground="#8c8c8c">
                    </TextBlock>

                </Grid>

                <!--Отображение подсказки (сверху от текстбокса введения ответа)-->
                <TextBlock FontSize="20"
                           Grid.Row="2"
                           Visibility="{Binding CdPromtIsVisible, Converter={converters:ForwardVisibilityConverter}}"
                           Text="{Binding CdPromtValue}"
                           Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Bottom"
                           Margin="0 0 0 12"
                           MouseEnter="OnPromtMouseEnter"
                           MouseLeave="OnPromtMouseLeave"
                           Name="promtTextBox"
                           Foreground="{DynamicResource EasyGray}"
                           d:Text="(Легко)">
                </TextBlock>

                <!--Отображение синонимов (сверху от текстбокса введения ответа)-->
                <StackPanel Visibility="{Binding CdAnotherAnswersIsVisible, Converter={converters:ForwardVisibilityConverter}}" 
                            Orientation="Horizontal" Height="40"
                            HorizontalAlignment="Center"
                            Grid.Row="2"
                            Margin="0 0 0 6"
                            VerticalAlignment="Bottom">
                    <TextBlock Style="{DynamicResource MaterialDesignHeadline1TextBlock}" 
                               Text="Также верно:" 
                               FontFamily="Arial"
                               VerticalAlignment="Center"
                               Margin="0 -2 0 0"
                               FontSize="16">
                    </TextBlock>
                    <ItemsControl ItemsSource="{Binding CdAnotherAnswerViews}" 
                                  VerticalContentAlignment="Center"
                                  Grid.Row="3">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel VerticalAlignment="Center"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                </StackPanel>

            </Grid>

            <!--Секция диктанта предлогов-->
            <Grid d:Visibility="Collapsed" 
                  VerticalAlignment="Stretch" 
                  HorizontalAlignment="Center"
                  Visibility="{Binding VpSectionIsVisible, Converter={converters:ReverseCollapseConverter}}">

                <Grid.RowDefinitions>
                    <!--Пустое пространство сверху-->
                    <RowDefinition Height="1.75*"/>
                    <!--Пространство для основного содержимого секции-->
                    <RowDefinition Height="Auto"/>
                    <!--Пространство "прилипающее" к нижней части секции (к текстбоксу ввода ответа)-->
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>

                <!--Основное содержимое секции-->
                <StackPanel Grid.Row="1">

                    <!--Парное отображение глагола и предлога-->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">

                        <!--Отображение глагола-->
                        <TextBlock FontSize="100"
                                   Text="{Binding VpMainDisplayValue}"
                                   Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                                   HorizontalAlignment="Center"
                                   Foreground="{DynamicResource EasyBlack}"
                                   VerticalAlignment="Center"
                                   d:Text="Depends">
                        </TextBlock>

                        <!--Отображение предлога (изначально скрытое)-->
                        <TextBlock FontSize="100"
                                   Grid.Column="1"
                                   Foreground="{Binding VpSecondDisplayColor}"
                                   Text="{Binding VpSecondDisplayValue}"
                                   Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                                   Visibility="{Binding VpSecondDisplayIsVisible, Converter={converters:ReverseCollapseConverter}}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Margin="30 0 0 0"
                                   d:Text="...">
                        </TextBlock>

                    </StackPanel>

                    <!--Отображение перевода-->
                    <TextBlock FontSize="36"
                               FontFamily="Arial"
                               Text="{Binding VpTranslationValue}"
                               Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               d:Text="Зависеть от"
                               Foreground="#8c8c8c">
                    </TextBlock>

                    <!--Отображение первого примера-->
                    <TextBlock FontSize="21"
                               Margin="0 20 0 5"
                               Text="{Binding VdFirstExampleValue}"
                               Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontFamily="Arial"
                               FontStyle="Italic"
                               d:Text="Comment"
                               Foreground="#8c8c8c">
                    </TextBlock>

                    <!--Отображение второго примера-->
                    <TextBlock FontSize="21"
                               Text="{Binding VdSecondExampleValue}"
                               Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontFamily="Arial"
                               FontStyle="Italic"
                               d:Text="Comment"
                               Foreground="#8c8c8c">
                    </TextBlock>
                    
                </StackPanel>

                <!--Отображение подсказки (сверху от текстбокса введения ответа)-->
                <TextBlock FontSize="20"
                           Grid.Row="2"
                           Visibility="{Binding VpPromtIsVisible, Converter={converters:ReverseCollapseConverter}}"
                           Text="{Binding VpPromtValue}"
                           Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Bottom"
                           Margin="0 0 0 10"
                           MouseEnter="OnPromtMouseEnter"
                           MouseLeave="OnPromtMouseLeave"
                           Name="vpPromtTextBox"
                           Foreground="{DynamicResource EasyGray}"
                           d:Text="(Легко)">
                </TextBlock>

            </Grid>

            <!--Секция диктанта неправильных глаголов-->
            <Grid d:Visibility="Visible" 
                  VerticalAlignment="Stretch" 
                  HorizontalAlignment="Center" 
                  Visibility="{Binding IvSectionIsVisible, Converter={converters:ReverseCollapseConverter}}">

                <Grid.RowDefinitions>
                    <!--Пустое пространство сверху-->
                    <RowDefinition Height="1.75*"/>
                    <!--Пространство для основного содержимого секции-->
                    <RowDefinition Height="Auto"/>
                    <!--Пространство "прилипающее" к нижней части секции (к текстбоксу ввода ответа)-->
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>

                <!--Основное содержимое секции-->
                <StackPanel Grid.Row="1">

                    <!--Отображение основного слова-->
                    <TextBlock FontSize="90"
                               Text="{Binding IvMainDisplayValue}"
                               Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Bottom"
                               Foreground="{DynamicResource EasyBlack}"
                               d:Text="Идти">
                    </TextBlock>

                    <!--Отображение комментария-->
                    <TextBlock FontSize="40"
                           Text="{Binding IvCommentValue}"
                           Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Top"
                           d:Text="Куда-то"
                           Foreground="#8c8c8c">
                    </TextBlock>

                    <!--Отображение лога ответов по текущему неправильному глаголу-->
                    <Grid Grid.Row="3" Margin="0 10 0 0">

                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                        <!--Серая галочка над первой формой-->
                        <materialDesign:PackIcon Kind="Check" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyGray}"
                                             Grid.Row="0" Grid.Column="0"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IvFirstFormGrayIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Иконка правильного ответа над первой формой-->
                        <materialDesign:PackIcon Kind="Check" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyGreen}"
                                             Grid.Row="0" Grid.Column="0"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IvFirstFormCorrectIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Иконка неправильного ответа над первой формой-->
                        <materialDesign:PackIcon Kind="Close" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyRed}"
                                             Grid.Row="0" Grid.Column="0"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IvFirstFormWrongIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Серая галочка над второй формой-->
                        <materialDesign:PackIcon Kind="Check" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyGray}"
                                             Grid.Row="0" Grid.Column="1"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IvSecondFormGrayIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Иконка правильного ответа над второй формой-->
                        <materialDesign:PackIcon Kind="Check" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyGreen}"
                                             Grid.Row="0" Grid.Column="1"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IvSecondFormCorrectIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Иконка неправильного ответа над второй формой-->
                        <materialDesign:PackIcon Kind="Close" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyRed}"
                                             Grid.Row="0" Grid.Column="1"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IvSecondFormWrongIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Серая галочка над третей формой-->
                        <materialDesign:PackIcon Kind="Check" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyGray}"
                                             Grid.Row="0" Grid.Column="2"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IvThirdFormGrayIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Иконка правильного ответа над третей формой-->
                        <materialDesign:PackIcon Kind="Check" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyGreen}"
                                             Grid.Row="0" Grid.Column="2"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IThirdFormCorrectIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Иконка неправильного ответа над третей формой-->
                        <materialDesign:PackIcon Kind="Close" 
                                             Height="40" 
                                             Width="40" 
                                             Foreground="{DynamicResource EasyRed}"
                                             Grid.Row="0" Grid.Column="2"
                                             HorizontalAlignment="Center"
                                             Visibility="{Binding IvThirdFormWrongIconIsVisible, Converter={converters:ForwardVisibilityConverter}}">
                        </materialDesign:PackIcon>

                        <!--Отображение первой формы глагола (изначально скрыто)-->
                        <TextBlock FontSize="30" 
                                   Margin="10 0" 
                                   HorizontalAlignment="Center" 
                                   Style="{DynamicResource MaterialDesignHeadline1TextBlock}" 
                                   Grid.Column="0" Grid.Row="1" 
                                   Text="{Binding IvFirstFormFixedAnswerValue}"
                                   Foreground="{DynamicResource EasyBlack}"
                                   d:Text="????">
                        </TextBlock>

                        <!--Отображение второй формы глагола (изначально скрыто)-->
                        <TextBlock FontSize="30" 
                                   Margin="10 0" 
                                   HorizontalAlignment="Center" 
                                   Style="{DynamicResource MaterialDesignHeadline1TextBlock}" 
                                   Grid.Column="1" Grid.Row="1" 
                                   Foreground="{DynamicResource EasyBlack}"
                                   Text="{Binding IvSecondFormFixedAnswerValue}"
                                   d:Text="????">
                        </TextBlock>

                        <!--Отображение третей формы глагола (изначально скрыто)-->
                        <TextBlock FontSize="30" 
                                   Margin="10 0" 
                                   HorizontalAlignment="Center" 
                                   Foreground="{DynamicResource EasyBlack}"
                                   Style="{DynamicResource MaterialDesignHeadline1TextBlock}" 
                                   Grid.Column="2" Grid.Row="1" Text="{Binding IvThirdFormFixedAnswerValue}"
                                   d:Text="????">
                        </TextBlock>

                    </Grid>

                </StackPanel>

                <!--Отображение подсказки (сверху от текстбокса введения ответа)-->
                <TextBlock FontSize="20"
                           Margin="0 0 0 10"
                           Grid.Row="2"
                           Visibility="{Binding IvPromtIsVisible, Converter={converters:ReverseCollapseConverter}}"
                           Text="{Binding IvPromtValue}"
                           Style="{DynamicResource MaterialDesignHeadline1TextBlock}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Bottom"
                           MouseEnter="OnPromtMouseEnter"
                           MouseLeave="OnPromtMouseLeave"
                           Name="ivPromtTextBox"
                           Foreground="{DynamicResource EasyGray}"
                           d:Text="(Легко)">
                </TextBlock>

            </Grid>

            <!--Текстбокс для записи перевода слова для проверки-->
            <TextBox Grid.Row="1" 
                     Name="answerTextBox"
                     HorizontalAlignment="Center"
                     VerticalAlignment="Top"
                     Height="50"
                     MaxHeight="54"
                     Padding="14 15 14 0"
                     KeyDown="OnKeyDown"
                     materialDesign:HintAssist.IsFloating="False"
                     Text="{Binding AnswerValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     Width="300"
                     FontFamily="Arial"
                     Foreground="{DynamicResource EasyBlack}"
                     Style="{DynamicResource EasyTextBox}"
                     materialDesign:HintAssist.Hint="Перевод"                
                     FontSize="16">
            </TextBox>

            <!--Кнопка "начать диктант"-->
            <Button Grid.Row="1"
                    Height="40" 
                    Width="130" 
                    Margin="0 45 0 0"
                    FontSize="19"
                    Style="{DynamicResource EasyCommonButton}"  
                    IsEnabled="{Binding StartButtonIsEnabled}"
                    Visibility="{Binding StartButtonIsVisible, Converter={converters:ForwardVisibilityConverter}}"
                    Command="{x:Static materialDesign:DialogHost.OpenDialogCommand}">

                <TextBlock Text="Начать" FontSize="17" FontFamily="Arial"/>

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <i:InvokeCommandAction Command="{Binding DisableAppWindowNavigationBarCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>

                <!--Диалоговое окно начала диктанта-->
                <Button.CommandParameter>
                    <Grid>

                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition Height="Auto" MinHeight="0.8"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <!--Комбобокс выбора словаря для проведения диктанта-->
                        <ComboBox Style="{DynamicResource EasyMainComboBox}"
                                  materialDesign:HintAssist.Hint="Словарь"
                                  Margin="14 14 14 0"
                                  Padding="14 13 14 12"
                                  MaxDropDownHeight="200"
                                  Foreground="{DynamicResource EasyBlack}"
                                  FontFamily="Arial"
                                  materialDesign:HintAssist.IsFloating="False"
                                  ItemsSource="{Binding DictionaryComboBoxItems}"
                                  SelectedItem="{Binding SelectedDictionaryComboBoxItem}">
                        </ComboBox>

                        <!--Слайдер для указания кол-ва слов из словаря для диктанта-->
                        <Slider Grid.Row="1"
                                Margin="14"
                                Minimum="{Binding DictationLengthSliderMinValue}" 
                                Maximum="{Binding DictationLengthSliderMaxValue}" 
                                Style="{DynamicResource MaterialDesignDiscreteSlider}" 
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                TickFrequency="1"
                                TickPlacement="Both"
                                Value="{Binding DictationLengthSliderValue, Mode=TwoWay}"
                                Width="400">
                        </Slider>

                        <!--Радио кнопки для выбора направления диктанта (для простого словаря)-->
                        <StackPanel HorizontalAlignment="Center"
                                    Grid.Row="2"
                                    Margin="0 0 0 12"
                                    Orientation="Horizontal"
                                    Visibility="{Binding DictationDirectionButtonsIsVisible, Converter={converters:ReverseCollapseConverter}}">
                            <RadioButton Style="{DynamicResource EasyRadioButton}"
                                         GroupName="DictationDirectionGroup"
                                         IsChecked="True"
                                         Margin="0 0 14 0"
                                         FontFamily="Arial">
                                <TextBlock FontFamily="Arial" FontSize="13" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" Text="С английского на русский"/>
                            </RadioButton>
                            <RadioButton Style="{DynamicResource EasyRadioButton}"
                                         GroupName="DictationDirectionGroup"
                                         FontFamily="Arial"
                                         IsChecked="{Binding SelectedDictationDirection, Converter={converters:DictationDirectionConverter}}">
                                <TextBlock FontFamily="Arial" FontSize="13" Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" Text="С русского на английский"/>
                            </RadioButton>
                        </StackPanel>

                        <!--Разделитель-->
                        <Border BorderBrush="{DynamicResource EasyGray}" 
                                    BorderThickness="0.4"
                                    Grid.Row="3"/>

                        <!--Кнопки отмены и подтверждения начала дикнтанта-->
                        <Grid Width="230"
                              Grid.Row="4"
                              Margin="0 12"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center">

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <!--Кнопка отмены-->
                            <Button Style="{DynamicResource EasyCancelButton}">

                                <TextBlock Text="Отмена" FontSize="14" FontFamily="Arial"/>

                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <i:InvokeCommandAction Command="{x:Static materialDesign:DialogHost.CloseDialogCommand}"/>
                                        <i:InvokeCommandAction Command="{Binding EnableAppWindowNavigationBarCommand}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>

                            </Button>

                            <!--Кнопка подтверждения-->
                            <Button Style="{DynamicResource EasyConfirmButton}"
                                    Grid.Column="1">

                                <TextBlock Text="Начать" FontSize="14" FontFamily="Arial"/>

                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <i:InvokeCommandAction Command="{x:Static materialDesign:DialogHost.CloseDialogCommand}"/>
                                        <i:InvokeCommandAction Command="{Binding StartDictationCommand}"/>
                                        <i:InvokeCommandAction Command="{Binding EnableAppWindowNavigationBarCommand}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>

                            </Button>

                        </Grid>

                    </Grid>
                </Button.CommandParameter>
            </Button>

            <!--Кнопка "завершить диктант"-->
            <Button Grid.Row="2"
                    Height="40" 
                    Name="stopDictationButton"
                    Width="130"                   
                    Margin="0 45 0 0"
                    FontSize="18"
                    Style="{DynamicResource EasyCommonButton}"
                    Command="{x:Static materialDesign:DialogHost.OpenDialogCommand}"
                    Visibility="{Binding StopButtonIsVisible, Converter={converters:ForwardVisibilityConverter}}">

                <TextBlock Text="Завершить" FontSize="15" FontFamily="Arial"/>

                <!--Окно результата диктанта-->
                <Button.CommandParameter>
                    <Grid Margin="14">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.ColumnSpan="2" Margin="0 0 0 14">
                            <TextBlock Text="{Binding Grade}"
                                       Foreground="{Binding GradeForeground}"
                                       FontSize="25"
                                       Grid.Row="1"
                                       FontFamily="Arial">
                            </TextBlock>
                            <TextBlock Text="/"
                                       Foreground="#8c8c8c"
                                       FontSize="25"
                                       Grid.Row="1"
                                       FontFamily="Arial">
                            </TextBlock>
                            <TextBlock Text="100"
                                       Foreground="#8c8c8c"
                                       FontSize="25"
                                       Grid.Row="1"
                                       FontFamily="Arial">
                            </TextBlock>
                        </StackPanel>

                        <TextBlock Text="Слов в диктанте:"
                                   Foreground="{DynamicResource EasyBlack}"
                                   FontSize="17"
                                   Grid.Row="1"
                                   FontFamily="Arial"
                                   Margin="0 0 0 7">
                        </TextBlock>

                        <TextBlock Text="Дано ответов:"
                                   Foreground="{DynamicResource EasyBlack}"
                                   FontSize="17"
                                   Grid.Row="2"
                                   FontFamily="Arial"
                                   Margin="0 0 0 7">
                        </TextBlock>

                        <TextBlock Text="Неверных ответов:"
                                   Foreground="{DynamicResource EasyBlack}"
                                   FontSize="17"
                                   Grid.Row="3"
                                   FontFamily="Arial"
                                   Margin="0 0 0 7">
                        </TextBlock>

                        <TextBlock Text="{Binding DictationWordsCount}"
                                   Foreground="{DynamicResource EasyBlack}"
                                   FontSize="17"
                                   Grid.Row="1"
                                   HorizontalAlignment="Center"
                                   Grid.Column="1"
                                   FontFamily="Arial"
                                   Margin="0 0 0 -2">
                        </TextBlock>

                        <TextBlock Text="{Binding DictationAnswersCount}"
                                   Foreground="{DynamicResource EasyBlack}"
                                   FontSize="17"
                                   Grid.Row="2"
                                   HorizontalAlignment="Center"
                                   Grid.Column="1"
                                   FontFamily="Arial"
                                   Margin="0 0 0 -2">
                        </TextBlock>

                        <TextBlock Text="{Binding DictationWrongAnswersCount}"
                                   Foreground="{DynamicResource EasyRed}"
                                   HorizontalAlignment="Center"
                                   FontSize="17"
                                   Grid.Row="3"
                                   Grid.Column="1"
                                   FontFamily="Arial"
                                   Margin="0 0 0 -2">
                        </TextBlock>

                        <Button Style="{DynamicResource EasyCommonButton}"  
                                Width="170"
                                Margin="0 14 0 0"
                                Grid.Row="4"
                                Grid.ColumnSpan="2"
                                Command="{x:Static materialDesign:DialogHost.CloseDialogCommand}"
                                FocusVisualStyle="{x:Null}">

                            <TextBlock Text="Понятно" FontFamily="Arial" FontSize="15"/>

                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="Click">
                                    <i:InvokeCommandAction Command="{Binding EnableAppWindowNavigationBarCommand}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </Button>

                    </Grid>

                </Button.CommandParameter>

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <i:InvokeCommandAction Command="{Binding StopDictationCommand}"/>
                        <i:InvokeCommandAction Command="{Binding DisableAppWindowNavigationBarCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>

            </Button>

            <!--Прогресс бар текущего диктанта-->
            <ProgressBar Grid.Row="1" 
                         VerticalAlignment="Bottom" 
                         Height="7"
                         Value="{Binding DictationProgressBarValue}"
                         Maximum="{Binding DictationProgressBarMaxValue}"/>

        </Grid>
    </materialDesign:DialogHost>
</Page>